function startNewGame(){$.get("api/game",function(n){HandleConnection(n)})}function joinExistingGame(){$.get("api/game?gameId="+$("#existingGameId").val(),function(n){HandleConnection(n)})}function HandleConnection(n){gameId=n.gameId;userId=n.userId;$("#gameId").text(n.gameId);$("#initializationButtons").hide();createGameContainer();socket=new WebSocket(connectionUrl);socket.onopen=function(){var t={};t.Type="Connection";t.GameId=n.gameId;t.Content=JSON.stringify(n);socket.send(JSON.stringify(t))};socket.onmessage=function(n){var t=JSON.parse(n.data),u,i,r;t.Type==="Info"?console.log(t.Content):t.Type==="GameReady"?(u=JSON.parse(t.Content),window.setTimeout(function(){console.log("GOOOO!!")},u.StartInSeconds*1e3)):t.Type==="TileFocus"?(console.log(t.Content),i=JSON.parse(t.Content),r="#"+i.XPos+"-"+i.YPos,i.UserId===userId?$(r).addClass("in-focus"):$(r).addClass("opposition-in-focus")):t.Type==="TileBlur"&&(console.log(t.Content),i=JSON.parse(t.Content),r="#"+i.XPos+"-"+i.YPos,$(r).removeClass("in-focus"),$(r).removeClass("opposition-in-focus"))}}function createGameContainer(){for(var i,n,r,t=0;t<9;t++){for(i='<div class="row">',n=0;n<9;n++)r='<div class="col-xs-12 tile" id="TILEIDGOESHERE"><input id="TILEINPUTIDGOESHERE" class="tile-input" onBlur="inputBlur(PARAMETERSGOHERE)"  onFocus="inputOnFocus(PARAMETERSGOHERE)"/><\/div>'.replace("PARAMETERSGOHERE",n+", "+t).replace("PARAMETERSGOHERE",n+", "+t).replace("TILEIDGOESHERE",n+"-"+t).replace("TILEINPUTIDGOESHERE","TileInputId-"+n+"-"+t),i+=r;i+="<\/div>";$("#gameContainer").append(i)}$("#gameContainer").show()}function inputOnFocus(n,t){var i={};i.XPos=n;i.YPos=t;i.UserId=userId;sendMessage("TileFocus",i)}function inputBlur(n,t){var i={},r;i.XPos=n;i.YPos=t;i.UserId=userId;r="#TileInputId-"+n+"-"+t;i.Value=$(r).val();sendMessage("TileBlur",i)}function sendMessage(n,t){var i={};i.Type=n;i.GameId=gameId;i.Content=JSON.stringify(t);socket.send(JSON.stringify(i))}var gameId,userId,socket,scheme=document.location.protocol==="https:"?"wss":"ws",port=document.location.port?":"+document.location.port:"",connectionUrl=scheme+"://"+document.location.hostname+":5000";