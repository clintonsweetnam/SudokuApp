function startNewGame(){$.get("api/game",function(n){HandleConnection(n)})}function joinExistingGame(){$.get("api/game?gameId="+$("#existingGameId").val(),function(n){HandleConnection(n)})}function HandleConnection(n){gameId=n.gameId;userId=n.userId;$("#header-logo").attr("data-original-title",n.gameId).tooltip("fixTitle");$("#initializationButtons").hide();createGameContainer();socket=new WebSocket(connectionUrl);socket.onopen=function(){var t={};t.Type="Connection";t.GameId=n.gameId;t.Content=JSON.stringify(n);socket.send(JSON.stringify(t))};socket.onmessage=function(n){var t=JSON.parse(n.data),u,i,r;t.Type==="Info"?console.log(t.Content):t.Type==="GameReady"?(u=JSON.parse(t.Content),window.setTimeout(function(){console.log("GOOOO!!")},u.StartInSeconds*1e3)):t.Type==="TileFocus"?(console.log(t.Content),i=JSON.parse(t.Content),r="#TileInputId-"+i.XPos+"-"+i.YPos,i.UserId===userId?$(r).addClass("in-focus"):$(r).addClass("opposition-in-focus")):t.Type==="TileBlur"&&(console.log(t.Content),i=JSON.parse(t.Content),r="#TileInputId-"+i.XPos+"-"+i.YPos,$(r).removeClass("in-focus"),$(r).removeClass("opposition-in-focus"))}}function createGameContainer(){for(var u,t,r,e,i,n=0;n<9;n++){for(u='<div class="row">',t=0;t<9;t++)r="",(n===0||n===3||n===6)&&(r+=" heavy-top-border"),n===8&&(r+=" heavy-bottom-border"),(t===0|t===3||t===6)&&(r+=" heavy-left-border"),t===8&&(r+=" heavy-right-border"),e='<div class="col-xs-12 tile EXTRACSSCLASSES" id="TILEIDGOESHERE"><input id="TILEINPUTIDGOESHERE" readonly="true" class="tile-input" onBlur="inputBlur(PARAMETERSGOHERE)"  onFocus="inputOnFocus(PARAMETERSGOHERE)"/><\/div>'.replace("PARAMETERSGOHERE",t+", "+n).replace("PARAMETERSGOHERE",t+", "+n).replace("TILEIDGOESHERE",t+"-"+n).replace("TILEINPUTIDGOESHERE","TileInputId-"+t+"-"+n).replace("EXTRACSSCLASSES",r),u+=e;u+="<\/div>";$("#gameContainer").append(u)}var o=window.innerWidth-21,f=o/9,i=document.getElementsByClassName("tile");for(n=0;n<i.length;n++)i[n].style.width=f+"px",i[n].style.height=f+"px";for(i=document.getElementsByClassName("tile-input"),n=0;n<i.length;n++)i[n].style.width=f-1+"px",i[n].style.height=f-1+"px";$("#gameContainer").show()}function inputOnFocus(n,t){var i={};i.XPos=n;i.YPos=t;i.UserId=userId;sendMessage("TileFocus",i)}function inputBlur(n,t){var i={},r;i.XPos=n;i.YPos=t;i.UserId=userId;r="#TileInputId-"+n+"-"+t;i.Value=$(r).val();sendMessage("TileBlur",i)}function sendMessage(n,t){var i={};i.Type=n;i.GameId=gameId;i.Content=JSON.stringify(t);socket.send(JSON.stringify(i))}$(function(){$('[data-toggle="tooltip"]').tooltip()});var gameId,userId,socket,scheme=document.location.protocol==="https:"?"wss":"ws",port=document.location.port?":"+document.location.port:"",connectionUrl=scheme+"://"+document.location.hostname+":5000";